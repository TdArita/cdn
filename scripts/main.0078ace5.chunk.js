(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{222:function(e,t,a){e.exports=a(465)},227:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){},327:function(e,t){},465:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),l=(a(227),a(94)),i=a.n(l),u=i.a.create({baseURL:"/api",withCredentials:!0}),s=a(200),m=a.n(s);window._=m.a,window.api=u,window.axios=i.a;a(244);var p=a(49),d=a(14),f=function(e){var t={};return{clearCache:function(){t={}},read:function(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];var c=n.join("|");if(c in t)return t[c];throw e.apply(void 0,n).then((function(e){t[c]=e}))}}},h=(a(245),a(468)),E=a(141),g=f((function(e){return u.get("/deskinfo?did="+e)}));function b(e){var t=e.did,a=g.read(t).data;return r.a.createElement("div",null,r.a.createElement("span",null,a.name),r.a.createElement("span",null,a.title))}var y=Object(p.f)((function(e){var t=Object(n.useState)(0),a=Object(d.a)(t,2),c=a[0],o=a[1];console.log(e);var l=e.match.params.rid,i=e.match.params.did;return r.a.createElement(h.a,{style:{width:"90%",margin:"10px auto",textAlign:"center"}},r.a.createElement("div",{className:"LandingPage"},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"\u6b63\u5728\u52a0\u8f7d\u684c\u9762\u4fe1\u606f")},r.a.createElement(b,{did:i})),r.a.createElement("h2",null,"\u8bf7\u9009\u62e9\u4eba\u6570"),r.a.createElement("ul",{className:"custom-count",style:{width:"300px",margin:"10px auto"}},r.a.createElement("li",{className:1===c?"active":null,onClick:function(){return o(1)}},"1"),r.a.createElement("li",{className:2===c?"active":null,onClick:function(){return o(2)}},"2"),r.a.createElement("li",{className:3===c?"active":null,onClick:function(){return o(3)}},"3"),r.a.createElement("li",{className:4===c?"active":null,onClick:function(){return o(4)}},"4")),r.a.createElement(E.a,{type:"primary",onClick:function(){e.history.push("/r/".concat(l,"/d/").concat(i,"/c/").concat(c))}},"\u5f00\u59cb\u70b9\u9910")))})),v=a(217),O=a(24),j=a.n(O),k=a(38),x=a(97),w=a(98),C=a(105),P=a(99),S=a(106),D=a(57),I=a(25),U=Object(I.b)(),V=a(100),N=a.n(V),B={float:"left",width:"100px",height:"100px",border:"2px solid"},T={border:"1px solid",padding:"5px",margin:"5px",overflow:"hidden"};function z(e){var t=e.food,a=e.onUpdate,n=e.amount;return r.a.createElement(h.a,{style:T},r.a.createElement("h3",null,t.name),r.a.createElement("div",null,r.a.createElement("img",{style:B,src:"/upload/"+t.img,alt:t.name}),r.a.createElement("p",null,"\u7b80\u4ecb\uff1a",t.desc),r.a.createElement("p",null,"\u4ef7\u683c\uff1a",t.price,"\u5143")),r.a.createElement("div",null,r.a.createElement(E.a,{onClick:function(){0!==n&&a(t,n-1)}},"-"),r.a.createElement("span",null,n,"\u4ef6"),r.a.createElement(E.a,{onClick:function(){a(t,n+1)}},"+")))}function M(e){return e.reduce((function(e,t){return e+t.amount*t.food.price}),0)}function R(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],o=a[1];var l=M(e.cart);return r.a.createElement("div",{style:{position:"fixed",bottom:"0px",border:"1px solid",left:"5px",right:"5px",background:"pink"}},c?r.a.createElement("div",{style:{display:"absolute",bottom:"0"}},e.cart.map((function(e){return r.a.createElement("div",{key:e.food.id},r.a.createElement("span",null,"\u83dc\u54c1\uff1a",e.food.name),r.a.createElement("br",null),r.a.createElement("span",null,"\u6570\u91cf\uff1a",e.amount,"\u4ef6"))}))):"",r.a.createElement(E.a,{onClick:function(){o(!c)}},c?"\u6536\u8d77":"\u5c55\u5f00"),r.a.createElement("strong",null,"\u603b\u4ef7\uff1a ",l,"\u5143"),r.a.createElement(E.a,{onClick:function(){return e.onPlaceOrder()}},"\u4e0b\u5355"))}z.defaultProps={onUpdate:function(){}};var _=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(C.a)(this,Object(P.a)(t).call(this,e))).cartChange=function(e,t){var n=a.props.match.params;a.socket.emit("new food",{desk:"desk:"+n.did,food:e,amount:t})},a.foodChange=function(e,t){var n=Object(D.a)(a.state.cart,(function(a){var n=a.findIndex((function(t){return t.food.id===e.id}));n>=0?0===t?a.splice(n,1):a[n].amount=t:a.push({food:e,amount:t})}));a.setState({cart:n})},a.placeOrder=function(){console.log("\u4e0b\u5355");var e=a.props.match.params;console.log(e),u.post("/restaurant/".concat(e.rid,"/desk/").concat(e.did,"/order"),{deskName:a.state.deskInfo.name,customCount:e.count,totalPrice:M(a.state.cart),foods:a.state.cart}).then((function(t){U.push({pathname:"/r/".concat(e.rid,"/d/").concat(e.did,"/order-success"),state:t.data})}))},a.state={cart:[],foodMenu:[],deskInfo:{}},a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;Object(k.a)(j.a.mark((function a(){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.post("/restaurant/"+t.rid+"/food/test",{did:t.did,msg:"test"}).then((function(e){"\u684c\u9762\u9519\u8bef"===e.data.msg&&(alert("\u684c\u9762\u9519\u8bef\uff0c\u5373\u5c06\u8fd4\u56de\u767b\u5f55\u9875\u9762"),U.push({pathname:"/login"}))}));case 2:return a.next=4,u.get("/menu/restaurant/"+t.rid).then((function(t){console.log(t),e.setState({foodMenu:t.data})}));case 4:case"end":return a.stop()}}),a)})))(),u.get("/deskinfo?did="+t.did).then((function(t){e.setState({deskInfo:t.data}),console.log("deskinfo",e.state.deskInfo)})),this.socket=N()({path:"/desk",query:{desk:"desk:"+t.did}}),this.socket.on("connect",(function(){console.log("connect socket"),e.socket.emit("join desk","desk:"+t.did)})),this.socket.on("cart food",(function(t){console.log("cart food",t),e.setState(Object(D.a)((function(e){var a;(a=e.cart).push.apply(a,Object(v.a)(t))}))),console.log("socket cart",e.state.cart)})),this.socket.on("new food",(function(t){e.foodChange(t.food,t.amount)})),this.socket.on("placeorder success",(function(e){U.push({pathname:"/r/".concat(t.rid,"/d/").concat(t.did,"/order-success"),state:e})}))}},{key:"componentWillUnmount",value:function(){this.socket.close()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{marginBottom:"45px"}},r.a.createElement("div",null,"\u9910\u5385\uff1a",this.state.deskInfo.title,r.a.createElement("br",null),"\u9910\u684c\uff1a",this.state.deskInfo.name),r.a.createElement("h2",null,"\u60a8\u597d\uff0c\u6b22\u8fce\u6765\u5230",this.state.deskInfo.title,"\u7528\u9910\uff0c\u8bf7\u5728\u4e0b\u65b9\u70b9\u9910\uff0c\u795d\u60a8\u7528\u9910\u6109\u5feb!"),r.a.createElement("div",null,this.state.foodMenu.map((function(t){var a=0,n=e.state.cart.find((function(e){return e.food.id===t.id}));return n&&(a=n.amount),r.a.createElement(z,{key:t.id,food:t,amount:a,onUpdate:e.cartChange})}))),r.a.createElement("div",null,r.a.createElement(R,{cart:this.state.cart,onUpdate:this.cartChange,onPlaceOrder:this.placeOrder})))}}]),t}(n.Component),A=a(23),J=a(471);function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(a,!0).forEach((function(t){Object(A.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F={margin:"5px"};function X(e){var t=e.order,a=e.onDelete,c=Object(n.useState)(t),o=Object(d.a)(c,2),l=o[0],i=o[1],s=l.timestamp,m=new Date(s).toLocaleString();return console.log(m),r.a.createElement(h.a,{style:F},r.a.createElement("h2",null,"\u9910\u684c\uff1a",l.deskName),r.a.createElement("h3",null,"\u4e0b\u5355\u65f6\u95f4\uff1a",m),l.details.map((function(e){return console.log(e),r.a.createElement("ul",{key:e.food.id},r.a.createElement("li",null,"\u83dc\u54c1\uff1a",e.food.name),r.a.createElement("li",null,"\u6570\u91cf\uff1a",e.amount))})),r.a.createElement("h3",null,"\u603b\u4ef7\u683c\uff1a",l.totalPrice,"\u5143"),r.a.createElement("h3",null,"\u4eba\u6570\uff1a",l.customCount),r.a.createElement("h3",null,"\u8ba2\u5355\u72b6\u6001\uff1a",l.status),r.a.createElement("div",null,r.a.createElement(E.a,null,"\u6253\u5370"),r.a.createElement(E.a,{onClick:function(){u.put("restaurant/1/order/".concat(l.id),{status:"confirmed"}).then((function(){i(W({},l,{status:"confirmed"}))}))}},"\u786e\u8ba4"),r.a.createElement(E.a,{onClick:function(){u.put("restaurant/1/order/".concat(l.id),{status:"completed"}).then((function(){i(W({},l,{status:"completed"}))}))}},"\u5b8c\u6210"),r.a.createElement(E.a,{onClick:function(){u.delete("restaurant/1/order/".concat(l.id)).then((function(){a(l)}))}},"\u5220\u9664")))}var q=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(C.a)(this,Object(P.a)(t).call(this,e))).onDelete=function(e){var t=a.state.orders.findIndex((function(t){return t.id===e.id}));a.setState(Object(D.a)((function(e){e.orders.splice(t,1)})))},a.state={orders:[]},a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props),this.socket=N()({path:"/restaurant",query:{restaurant:"restaurant:"+this.props.match.params.rid}}),this.socket.on("new order",(function(t){e.setState(Object(D.a)((function(e){e.orders.unshift(t)})))})),u.get("restaurant/1/order").then((function(t){e.setState(Object(D.a)((function(e){e.orders=t.data})))}))}},{key:"componentWillUnmount",value:function(){this.socket.close()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"\u8ba2\u5355\u7ba1\u7406"),r.a.createElement("div",null,this.state.orders.length>0?this.state.orders.map((function(t){return r.a.createElement(X,{onDelete:e.onDelete,key:t.id,order:t})})):r.a.createElement("div",null,r.a.createElement(J.a,{active:!0,paragraph:{rows:8}}),r.a.createElement(J.a,{active:!0,paragraph:{rows:8}}))))}}]),t}(n.Component),G=a(29),Y=a(469),$=a(470),H=a(467),K=a(9);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach((function(t){Object(A.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee={float:"left",border:"1px solid",width:"100px",height:"100px",objectFit:"cover"},te={overflow:"hidden"},ae={padding:"5px",margin:"5px"};function ne(e){var t=e.food,a=e.onDelete,c=Object(n.useState)(!1),o=Object(d.a)(c,2),l=o[0],i=o[1],s=Object(n.useState)(t),m=Object(d.a)(s,2),p=m[0],f=m[1];function g(e){f(Z({},p,Object(A.a)({},e.target.name,e.target.value))),console.log(p)}var b={beforeUpload:function(e){return f(Z({},p,{img:e})),!1}};return p?r.a.createElement(h.a,{style:ae},r.a.createElement("h3",null,p.name),r.a.createElement("div",{style:te},r.a.createElement("img",{src:"/upload/"+p.img,alt:p.name,style:ee}),r.a.createElement("p",null,"\u4ecb\u7ecd\uff1a",p.desc),r.a.createElement("p",null,"\u4ef7\u683c\uff1a",p.price,"\u5143"),r.a.createElement("p",null,"\u4e0a\u67b6\u72b6\u6001\uff1a","on"===p.status?"\u5df2\u4e0a\u67b6":"\u5df2\u4e0b\u67b6"),r.a.createElement("p",null,"\u5206\u7c7b\uff1a",p.category?p.category:"[\u6682\u672a\u5206\u7c7b]")),l?r.a.createElement("div",null,r.a.createElement(Y.a,null,"\u540d\u79f0\uff1a",r.a.createElement($.a,{type:"text",onChange:g,defaultValue:p.name,name:"name"}),r.a.createElement("br",null),"\u4ecb\u7ecd\uff1a",r.a.createElement($.a,{type:"text",onChange:g,defaultValue:p.desc,name:"desc"}),r.a.createElement("br",null),"\u4ef7\u683c\uff1a",r.a.createElement($.a,{type:"text",onChange:g,defaultValue:p.price,name:"price"}),r.a.createElement("br",null),"\u5206\u7c7b\uff1a",r.a.createElement($.a,{type:"text",onChange:g,defaultValue:p.category,name:"category"}),r.a.createElement("br",null),r.a.createElement(Y.a.Item,{label:"Upload",extra:"\u56fe\u7247\u4e0a\u4f20"},r.a.createElement(H.a,b,r.a.createElement(E.a,null,r.a.createElement(K.a,{type:"upload"})," Click to Upload"))))):"",r.a.createElement("div",null,r.a.createElement(E.a,{onClick:function(){return i(!0)}},"\u4fee\u6539"),r.a.createElement(E.a,{onClick:function(){i(!1);var e=new FormData;for(var a in p){var n=p[a];e.append(a,n)}u.put("/restaurant/1/food/"+t.id,e).then((function(e){return f(e.data)})).catch((function(e){console.log("\u4fee\u6539\u53d1\u751f\u9519\u8bef")}))}},"\u4fdd\u5b58"),r.a.createElement(E.a,{onClick:function(){"on"===p.status?p.status="off":p.status="on",u.put("/restaurant/1/food/"+t.id,p).then((function(e){return f(e.data)})).catch((function(e){console.log("\u4fee\u6539\u53d1\u751f\u9519\u8bef")}))}},"off"===p.status?"\u4e0a\u67b6":"\u4e0b\u67b6"),r.a.createElement(E.a,{onClick:function(){u.delete("/restaurant/1/food/"+t.id).then((function(){a(t.id)}))}},"\u5220\u9664"))):void 0}var re=function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],o=a[1];function l(e){o(c.filter((function(t){return t.id!==e})))}return Object(n.useEffect)((function(){u.get("/restaurant/".concat(e.match.params.rid,"/food")).then((function(e){return o(e.data)}))}),[e.match.params.rid]),console.log(c),r.a.createElement("div",null,r.a.createElement("div",{style:{marginTop:"10px"}},r.a.createElement(E.a,null,r.a.createElement(G.a,{to:"add-food"},"\u6dfb\u52a0\u83dc\u54c1"))),r.a.createElement("div",null,c.map((function(e){return r.a.createElement(ne,{onDelete:l,key:e.id,food:e})}))))};function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var oe={overflow:"hidden"},le={padding:"5px",margin:"5px"};function ie(e){var t=e.desk,a=e.onDelete,c=Object(n.useState)(!1),o=Object(d.a)(c,2),l=o[0],i=o[1],s=Object(n.useState)(t),m=Object(d.a)(s,2),p=m[0],f=m[1];function g(e){f(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach((function(t){Object(A.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},p,Object(A.a)({},e.target.name,e.target.value))),console.log(p)}return p?r.a.createElement(h.a,{style:le},r.a.createElement("h3",null,"\u684c\u9762\u540d\u79f0\uff1a",p.name),r.a.createElement("h3",null,"\u684c\u9762ID\uff1a",p.id),r.a.createElement("div",{style:oe},r.a.createElement("p",null,"\u6700\u5927\u5bb9\u7eb3\u4eba\u6570\uff1a",p.capacity,"\u4eba")),l?r.a.createElement("div",null,r.a.createElement(Y.a,null,"\u540d\u79f0\uff1a",r.a.createElement($.a,{type:"text",onChange:g,defaultValue:p.name,name:"name"}),r.a.createElement("br",null),"\u6700\u5927\u5bb9\u7eb3\u4eba\u6570\uff1a",r.a.createElement($.a,{type:"text",onChange:g,defaultValue:p.capacity,name:"capacity"}),r.a.createElement("br",null))):"",r.a.createElement("div",null,r.a.createElement(E.a,{onClick:function(){return i(!0)}},"\u4fee\u6539"),r.a.createElement(E.a,{onClick:function(){i(!1),u.put("/restaurant/1/desk/"+t.id,p).then((function(e){return f(e.data)})).catch((function(e){console.log("\u4fee\u6539\u53d1\u751f\u9519\u8bef")}))}},"\u4fdd\u5b58"),r.a.createElement(E.a,{onClick:function(){u.delete("/restaurant/1/desk/"+t.id).then((function(){a(t.id)}))}},"\u5220\u9664"))):void 0}var ue=function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],o=a[1];function l(e){o(c.filter((function(t){return t.id!==e})))}return Object(n.useEffect)((function(){u.get("/restaurant/".concat(e.match.params.rid,"/desk")).then((function(e){return o(e.data)}))}),[e.match.params.rid]),console.log(c),r.a.createElement("div",null,r.a.createElement("div",{style:{marginTop:"10px"}},r.a.createElement(E.a,null,r.a.createElement(G.a,{to:"add-desk"},"\u6dfb\u52a0\u684c\u9762"))),r.a.createElement("div",null,c.map((function(e){return r.a.createElement(ie,{onDelete:l,key:e.id,desk:e})}))))};function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(a,!0).forEach((function(t){Object(A.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var pe=function(e){var t=Object(n.useState)({name:"",desc:"",price:0,category:"",status:"on",img:null}),a=Object(d.a)(t,2),c=a[0],o=a[1];function l(e){o(me({},c,Object(A.a)({},e.target.name,e.target.value))),console.log(c)}var i={beforeUpload:function(e){return o(me({},c,{img:e})),!1}};return r.a.createElement("div",null,r.a.createElement(h.a,{style:{width:"800px"}},r.a.createElement("h2",null,"\u6dfb\u52a0\u83dc\u54c1"),r.a.createElement(Y.a,{style:{width:"500px"}},"\u540d\u79f0\uff1a",r.a.createElement($.a,{type:"text",onChange:l,defaultValue:c.name,name:"name"}),r.a.createElement("br",null),"\u4ecb\u7ecd\uff1a",r.a.createElement($.a,{type:"text",onChange:l,defaultValue:c.desc,name:"desc"}),r.a.createElement("br",null),"\u4ef7\u683c\uff1a",r.a.createElement($.a,{type:"text",onChange:l,defaultValue:c.price,name:"price"}),r.a.createElement("br",null),"\u5206\u7c7b\uff1a",r.a.createElement($.a,{type:"text",onChange:l,defaultValue:c.category,name:"category"}),r.a.createElement("br",null),r.a.createElement(Y.a.Item,{label:"Upload",extra:"\u56fe\u7247\u4e0a\u4f20"},r.a.createElement(H.a,i,r.a.createElement(E.a,null,r.a.createElement(K.a,{type:"upload"})," Click to Upload"))),r.a.createElement(E.a,{onClick:function(e){e.preventDefault();var t=new FormData;for(var a in c){var n=c[a];t.append(a,n)}u.post("/restaurant/1/food",t).then((function(e){U.goBack()}))},type:"primary"},"\u63d0\u4ea4"))))};function de(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var fe=function(e){var t=Object(n.useState)({name:"",capacity:0}),a=Object(d.a)(t,2),c=a[0],o=a[1];function l(e){o(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?de(a,!0).forEach((function(t){Object(A.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):de(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},c,Object(A.a)({},e.target.name,e.target.value))),console.log(c)}return r.a.createElement("div",null,r.a.createElement(h.a,{style:{width:"800px"}},r.a.createElement("h2",null,"\u6dfb\u52a0\u684c\u9762"),r.a.createElement(Y.a,{style:{width:"500px"}},"\u540d\u79f0\uff1a",r.a.createElement($.a,{type:"text",onChange:l,defaultValue:c.name,name:"name"}),r.a.createElement("br",null),"\u6700\u5927\u5bb9\u7eb3\u4eba\u6570\uff1a",r.a.createElement($.a,{type:"text",onChange:l,defaultValue:c.capacity,name:"capacity"}),r.a.createElement("br",null),r.a.createElement(E.a,{onClick:function(e){e.preventDefault(),u.post("/restaurant/1/desk",c).then((function(e){U.goBack()}))},type:"primary"},"\u63d0\u4ea4"))))},he=a(472),Ee=a(216),ge=f(Object(k.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.get("/userinfo").catch((function(){U.push("/")})));case 1:case"end":return e.stop()}}),e)}))));function be(e){var t=ge.read();return r.a.createElement(he.a,{style:{border:"1px solid rgb(235, 237, 240)"},title:"\u6b22\u8fce",subTitle:t.data.title})}var ye=Object(p.f)((function(e){function t(){return(t=Object(k.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.get("/logout");case 2:ge.clearCache(),e.history.push("/");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}console.log(e),""===document.cookie&&U.push("/");return r.a.createElement("div",null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"loading...")},r.a.createElement(be,{history:U})),r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{href:"#/restaurant/".concat(e.match.params.rid,"/manage")},r.a.createElement(K.a,{type:"home"})),r.a.createElement(Ee.a.Item,{href:"#/restaurant/".concat(e.match.params.rid,"/manage/order")},r.a.createElement(K.a,{type:"shopping-cart"}),r.a.createElement("span",null,"\u8ba2\u5355\u7ba1\u7406")),r.a.createElement(Ee.a.Item,{href:"#/restaurant/".concat(e.match.params.rid,"/manage/food")},r.a.createElement(K.a,{type:"coffee"}),r.a.createElement("span",null,"\u83dc\u54c1\u7ba1\u7406")),r.a.createElement(Ee.a.Item,{href:"#/restaurant/".concat(e.match.params.rid,"/manage/desk")},r.a.createElement(K.a,{type:"solution"}),r.a.createElement("span",null,"\u684c\u9762\u7ba1\u7406"))),r.a.createElement(E.a,{type:"danger",style:{position:"fixed",right:"5px",top:"5px",zIndex:"10"},onClick:function(){return t.apply(this,arguments)}},"\u9000\u51fa"),r.a.createElement("main",null,r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/restaurant/:rid/manage/order",component:q}),r.a.createElement(p.a,{path:"/restaurant/:rid/manage/food",component:re}),r.a.createElement(p.a,{path:"/restaurant/:rid/manage/desk",component:ue}),r.a.createElement(p.a,{path:"/restaurant/:rid/manage/add-food",component:pe}),r.a.createElement(p.a,{path:"/restaurant/:rid/manage/add-desk",component:fe}))))})),ve=Object(p.f)((function(e){var t=Object(n.useState)(),a=Object(d.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(),i=Object(d.a)(l,2),s=i[0],m=i[1],p=Object(n.useState)(),f=Object(d.a)(p,2),h=f[0],g=f[1];function b(){return(b=Object(k.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),console.log("\u53d1\u9001\u4fe1\u606f",c,s,h),t.prev=2,t.next=5,u.post("/login",{name:c,password:s,captcha:h});case 5:n=t.sent,console.log("res",n),e.history.push("/restaurant/".concat(n.data.id,"/manage")),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.dir(t.t0),t.t0.response.data.msg&&alert(t.t0.response.data.msg);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}console.log(e);return r.a.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"}},r.a.createElement("div",{style:{width:"calc(100% + 10px)",height:"calc(100% + 10px)",backgroundImage:"url(http://img.1ppt.com/uploads/allimg/1803/1_180319154959_1.JPG)",backgroundRepeat:"no-repeat",backgroundSize:"cover",filter:"blur(4px)",margin:"-5px -5px"}}),r.a.createElement("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)",width:"250px",textAlign:"center",border:"1px solid #fbfbfb",backgroundColor:"#fbfbfb",borderRadius:"4px",zIndex:"10"}},r.a.createElement("h2",{style:{display:"inline-block"}},"\u9910\u5385\u7ba1\u7406\u5458\u767b\u5f55"),r.a.createElement(Y.a,{className:"login-form"},r.a.createElement($.a,{prefix:r.a.createElement(K.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),type:"text",onChange:function(e){o(e.target.value)},placeholder:"username"}),r.a.createElement($.a,{prefix:r.a.createElement(K.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"password",onChange:function(e){m(e.target.value)}}),r.a.createElement("img",{src:"/api/captcha",alt:"captcha"}),r.a.createElement($.a,{type:"text",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",onChange:function(e){g(e.target.value)}}),r.a.createElement(E.a,{type:"primary",style:{marginTop:"5px",width:"250px"},onClick:function(e){return b.apply(this,arguments)}},"\u767b\u5f55"))))})),Oe=(a(464),{marginTop:"100px",float:"left",width:"200px",height:"200px",marginLeft:"50%",transform:"translateX(-50%)"}),je=function(){return r.a.createElement(h.a,{style:Oe},r.a.createElement("div",{style:{width:"100px",margin:"auto",padding:"39px 0px"}},r.a.createElement(E.a,{type:"primary",style:{width:"100px",marginBottom:"10px"}},r.a.createElement(G.a,{to:"/login"},"\u767b\u5f55\u9875\u9762")),r.a.createElement("br",null),r.a.createElement(E.a,{type:"primary",style:{width:"100px"}},r.a.createElement(G.a,{to:"/register"},"\u6ce8\u518c\u9875\u9762"))))};function ke(e){return console.log(e),r.a.createElement("div",null,r.a.createElement("h2",null,"\u4e0b\u5355\u6210\u529f"),r.a.createElement("p",null,"\u603b\u4ef7\uff1a",e.location.state&&e.location.state.totalPrice,"\u5143"))}var xe=Object(p.f)((function(e){var t=Object(n.useState)(),a=Object(d.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(),i=Object(d.a)(l,2),s=i[0],m=i[1],p=Object(n.useState)(),f=Object(d.a)(p,2),h=f[0],g=f[1],b=Object(n.useState)(),y=Object(d.a)(b,2),v=y[0],O=y[1],x=Object(n.useState)(),w=Object(d.a)(x,2),C=w[0],P=w[1];function S(){return(S=Object(k.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),h===s){t.next=4;break}return alert("\u8bf7\u786e\u8ba4\u5bc6\u7801"),t.abrupt("return");case 4:return console.log("\u53d1\u9001\u4fe1\u606f",c,s),t.prev=5,t.next=8,u.post("/register",{name:c,email:C,password:s,title:v});case 8:n=t.sent,console.log("res",n),e.history.push("/login"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.dir(t.t0),alert(t.t0.response.data.msg);case 17:case"end":return t.stop()}}),t,null,[[5,13]])})))).apply(this,arguments)}console.log(e);return r.a.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"}},r.a.createElement("div",{style:{width:"calc(100% + 10px)",height:"calc(100% + 10px)",backgroundImage:"url(http://img.1ppt.com/uploads/allimg/1803/1_180319154959_1.JPG)",backgroundRepeat:"no-repeat",backgroundSize:"cover",filter:"blur(4px)",margin:"-5px -5px"}}),r.a.createElement("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)",width:"250px",textAlign:"center",border:"1px solid #fbfbfb",backgroundColor:"#fbfbfb",borderRadius:"4px",zIndex:"10"}},r.a.createElement("h2",{style:{display:"inline-block"}},"\u9910\u5385\u7ba1\u7406\u5458\u6ce8\u518c"),r.a.createElement(Y.a,{className:"login-form"},r.a.createElement($.a,{prefix:r.a.createElement(K.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),type:"text",onChange:function(e){o(e.target.value)},placeholder:"\u7528\u6237\u540d"}),r.a.createElement($.a,{prefix:r.a.createElement(K.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),type:"text",onChange:function(e){O(e.target.value)},placeholder:"\u9910\u5385\u540d"}),r.a.createElement($.a,{prefix:r.a.createElement(K.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),type:"text",onChange:function(e){P(e.target.value)},placeholder:"\u90ae\u7bb1"}),r.a.createElement($.a,{prefix:r.a.createElement(K.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801",onChange:function(e){m(e.target.value)}}),r.a.createElement($.a,{prefix:r.a.createElement(K.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u786e\u8ba4\u5bc6\u7801",onChange:function(e){g(e.target.value)}}),r.a.createElement(E.a,{type:"primary",style:{marginTop:"5px",width:"250px"},onClick:function(e){return S.apply(this,arguments)}},"\u6ce8\u518c"))))}));var we=function(){return r.a.createElement(p.b,{history:U},r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/",exact:!0,component:je}),r.a.createElement(p.a,{path:"/landing/r/:rid/d/:did",component:y}),r.a.createElement(p.a,{path:"/r/:rid/d/:did/c/:count",component:_}),r.a.createElement(p.a,{path:"/r/:rid/d/:did/order-success",component:ke}),r.a.createElement(p.a,{path:"/restaurant/:rid/manage",component:ye}),r.a.createElement(p.a,{path:"/login",component:ve}),r.a.createElement(p.a,{path:"/register",component:xe})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(we,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[222,1,2]]]);
//# sourceMappingURL=main.0078ace5.chunk.js.map